<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply for Backend Engineer | JobPortal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            width: 90%;
            max-width: 1000px;
            margin: 30px auto;
            padding: 0 20px;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            color: #4f46e5;
            text-decoration: none;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .back-link i {
            margin-right: 8px;
        }
        
        .job-header {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .job-title {
            font-size: 28px;
            margin-bottom: 5px;
            color: #2d3748;
        }
        
        .job-company {
            font-size: 18px;
            color: #4f46e5;
            margin-bottom: 15px;
            font-weight: 500;
        }
        
        .job-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            color: #4a5568;
        }
        
        .meta-item i {
            margin-right: 8px;
            color: #718096;
        }
        
        .job-description {
            margin: 25px 0;
            color: #4a5568;
            line-height: 1.7;
        }
        
        .application-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 768px) {
            .application-container {
                grid-template-columns: 1fr;
            }
        }
        
        .client-info {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            height: fit-content;
        }
        
        .client-info h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: #2d3748;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .client-detail {
            margin-bottom: 15px;
        }
        
        .client-detail strong {
            display: block;
            margin-bottom: 5px;
            color: #4a5568;
        }
        
        .client-detail span {
            color: #718096;
        }
        
        .client-rating {
            display: flex;
            align-items: center;
            color: #f59e0b;
            margin-bottom: 15px;
        }
        
        .application-form {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .application-form h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: #2d3748;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a5568;
        }
        
        .form-group label.required:after {
            content: " *";
            color: #e53e3e;
        }
        
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="tel"],
        .form-group input[type="url"] {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #4f46e5;
        }
        
        .file-upload {
            position: relative;
        }
        
        .file-upload-input {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        .file-upload-label {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 15px;
            border: 1px dashed #cbd5e0;
            border-radius: 6px;
            background-color: #f8fafc;
        }
        
        .file-upload-button {
            background-color: #e2e8f0;
            color: #4a5568;
            padding: 8px 15px;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .file-selected {
            color: #718096;
            font-size: 14px;
        }
        
        .file-requirements {
            font-size: 12px;
            color: #718096;
            margin-top: 5px;
        }
        
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 16px;
            min-height: 150px;
            resize: vertical;
            transition: border-color 0.3s;
        }
        
        .form-group textarea:focus {
            outline: none;
            border-color: #4f46e5;
        }
        
        .submit-button {
            background-color: #4f46e5;
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.3s;
        }
        
        .submit-button:hover {
            background-color: #4338ca;
        }
        
        .skills-section {
            margin-top: 25px;
        }
        
        .skills-section h4 {
            margin-bottom: 15px;
            color: #4a5568;
        }
        
        .skills-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .skill-tag {
            background-color: #e0e7ff;
            color: #4f46e5;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
    </style>
</head>

<body>
    <div class="container">
        <a href="#" class="back-link">
            <i class="fas fa-arrow-left"></i> Back to job listing
        </a>

        <div class="job-header">
            <h1 class="job-title">Backend Engineer</h1>
            <p class="job-company">DataSystems Corp</p>

            <div class="job-meta">
                <div class="meta-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Austin, TX (Hybrid)</span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-dollar-sign"></i>
                    <span>$110,000 - $140,000</span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-briefcase"></i>
                    <span>Full time</span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-clock"></i>
                    <span>Posted 3 days ago</span>
                </div>
            </div>

            <div class="job-description">
                <p>Seeking experienced Backend Engineer proficient in Node.js and Python to develop and maintain our API services and database architecture. You'll be responsible for designing scalable systems, optimizing database performance, and implementing
                    robust security measures.</p>
                <p style="margin-top: 15px;">The ideal candidate will have experience with microservices architecture, cloud platforms (AWS preferred), and containerization technologies.</p>
            </div>

            <div class="skills-section">
                <h4>Required Skills:</h4>
                <div class="skills-tags">
                    <span class="skill-tag">Node.js</span>
                    <span class="skill-tag">Python</span>
                    <span class="skill-tag">API Development</span>
                    <span class="skill-tag">Database Design</span>
                    <span class="skill-tag">AWS</span>
                    <span class="skill-tag">Docker</span>
                </div>
            </div>
        </div>

        <div class="application-container">
            <div class="client-info">
                <h3>Client Information</h3>

                <div class="client-detail">
                    <strong>Name</strong>
                    <span>DataSystems HR</span>
                </div>

                <div class="client-detail">
                    <strong>Email</strong>
                    <span>hr@datasystems.com</span>
                </div>

                <div class="client-rating">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                    <span style="color: #4a5568; margin-left: 5px;">4.6 (32 reviews)</span>
                </div>

                <div class="client-detail">
                    <strong>Location</strong>
                    <span>Austin, TX</span>
                </div>

                <div class="client-detail">
                    <strong>Member Since</strong>
                    <span>March 2018</span>
                </div>

                <div class="client-detail">
                    <strong>About</strong>
                    <span>DataSystems Corp provides cutting-edge data solutions for businesses worldwide. We specialize in enterprise data management, analytics platforms, and cloud data services.</span>
                </div>
            </div>

            <div class="application-form">
                <h3>Application Form</h3>

                <form id="jobApplicationForm">
                    <div class="form-group">
                        <label for="fullName" class="required">Full Name</label>
                        <input type="text" id="fullName" name="fullName" required>
                    </div>

                    <div class="form-group">
                        <label for="email" class="required">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" name="phone">
                    </div>

                    <div class="form-group">
                        <label for="resume" class="required">Resume/CV</label>
                        <div class="file-upload">
                            <input type="file" id="resume" name="resume" class="file-upload-input" accept=".pdf,.doc,.docx" required>
                            <label for="resume" class="file-upload-label">
                                <span class="file-selected" id="resumeFileName">No file selected</span>
                                <span class="file-upload-button">Browse...</span>
                            </label>
                        </div>
                        <div class="file-requirements">Accepted formats: PDF, DOC, DOCX (Max 5MB)</div>
                    </div>

                    <div class="form-group">
                        <label for="portfolio">Portfolio/Website</label>
                        <input type="url" id="portfolio" name="portfolio" placeholder="https://">
                    </div>

                    <div class="form-group">
                        <label for="coverLetter">Cover Letter</label>
                        <textarea id="coverLetter" name="coverLetter" placeholder="Tell us why you're a good fit for this position..."></textarea>
                    </div>

                    <button type="submit" class="submit-button">Submit Application</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Handle file input display
        document.getElementById('resume').addEventListener('change', function(e) {
            const fileName = e.target.files.length > 0 ? e.target.files[0].name : 'No file selected';
            document.getElementById('resumeFileName').textContent = fileName;

            // Simple file validation
            if (e.target.files.length > 0) {
                const file = e.target.files[0];
                const validTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
                const maxSize = 5 * 1024 * 1024; // 5MB

                if (!validTypes.includes(file.type)) {
                    alert('Please upload a PDF, DOC, or DOCX file.');
                    e.target.value = '';
                    document.getElementById('resumeFileName').textContent = 'No file selected';
                } else if (file.size > maxSize) {
                    alert('File size exceeds 5MB limit.');
                    e.target.value = '';
                    document.getElementById('resumeFileName').textContent = 'No file selected';
                }
            }
        });

        // Form submission
        document.getElementById('jobApplicationForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Basic validation
            const fullName = document.getElementById('fullName').value.trim();
            const email = document.getElementById('email').value.trim();
            const resume = document.getElementById('resume').files.length > 0;

            if (!fullName || !email || !resume) {
                alert('Please fill in all required fields.');
                return;
            }

            try {
                // Get the selected project ID
                const projectId = localStorage.getItem('selectedProjectId');
                if (!projectId) {
                    throw new Error('No project selected');
                }

                // Get project details
                const projects = JSON.parse(localStorage.getItem('projects')) || [];
                const project = projects.find(p => p.projectId === projectId);
                if (!project) {
                    throw new Error('Project not found');
                }

                // Create application data
                const applicationData = {
                    projectId: projectId,
                    projectTitle: project.title,
                    appliedAt: new Date().toISOString(),
                    status: 'pending',
                    freelancerId: localStorage.getItem('userId'),
                    freelancerName: fullName,
                    email: email,
                    phone: document.getElementById('phone').value.trim(),
                    resume: document.getElementById('resume').files[0].name,
                    portfolio: document.getElementById('portfolio').value.trim(),
                    coverLetter: document.getElementById('coverLetter').value.trim()
                };

                // Store the application
                const applications = JSON.parse(localStorage.getItem('projectApplications')) || [];
                applications.push(applicationData);
                localStorage.setItem('projectApplications', JSON.stringify(applications));

                // Create notification for client
                const clientNotifications = JSON.parse(localStorage.getItem('clientNotifications')) || [];
                const newNotification = {
                    id: Date.now().toString(),
                    type: 'new_application',
                    title: 'New Application Received',
                    message: `${fullName} has applied to your project "${project.title}"`,
                    time: new Date().toISOString(),
                    read: false,
                    applicationData: applicationData
                };
                clientNotifications.unshift(newNotification);
                localStorage.setItem('clientNotifications', JSON.stringify(clientNotifications));

                // Clear the selected project ID
                localStorage.removeItem('selectedProjectId');

                // Show success message
                alert('Your application has been submitted successfully!');

                // Reset form
                this.reset();
                document.getElementById('resumeFileName').textContent = 'No file selected';

                // Redirect back to freelancer dashboard
                window.location.href = 'freelancerDashboard.html';
            } catch (error) {
                console.error('Error submitting application:', error);
                alert('Error submitting application. Please try again.');
            }
        });

        // Back link functionality
        document.querySelector('.back-link').addEventListener('click', function(e) {
            e.preventDefault();
            // In a real app, this would navigate back to the job listings
            console.log('Navigating back to job listings');
            // window.history.back() or specific route
        });

        document.addEventListener('DOMContentLoaded', function() {
            // Load job details if coming from notification
            const selectedProjectId = localStorage.getItem('selectedProjectId');
            if (selectedProjectId) {
                const projects = JSON.parse(localStorage.getItem('projects')) || [];
                const project = projects.find(p => p.projectId === selectedProjectId);

                if (project) {
                    // Update job details in the header
                    document.querySelector('.job-title').textContent = project.title;
                    document.querySelector('.job-company').textContent = project.company;

                    // Update job meta information
                    const metaItems = document.querySelectorAll('.meta-item');
                    metaItems[0].querySelector('span').textContent = project.location;
                    metaItems[1].querySelector('span').textContent = `$${project.salaryMin} - $${project.salaryMax}`;
                    metaItems[2].querySelector('span').textContent = project.jobType;

                    // Update job description
                    document.querySelector('.job-description').innerHTML = `<p>${project.description}</p>`;

                    // Update skills
                    const skillsContainer = document.querySelector('.skills-tags');
                    skillsContainer.innerHTML = project.skills.map(skill =>
                        `<span class="skill-tag">${skill}</span>`
                    ).join('');

                    // Update client information
                    document.querySelector('.client-info .client-detail:nth-child(1) span').textContent = project.company;

                    // Clear the selected project ID
                    localStorage.removeItem('selectedProjectId');
                }
            }
        });
    </script>
</body>

</html>